(this["webpackJsonpproject2-frontend"]=this["webpackJsonpproject2-frontend"]||[]).push([[0],{37:function(t,e,n){},65:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),s=n(31),i=n.n(s),c=(n(37),n(2)),o=n(3),u=n(4),l=n(6),d=n(5),h=n(7),j=n.n(h),b=n(11),O=n(8),p=n(0),f=function(t){return Object(p.jsx)("div",{children:Object(p.jsxs)("nav",{children:[Object(p.jsx)(b.b,{to:"/",children:"Home"}),t.isLoggedIn&&Object(p.jsxs)("span",{children:[Object(p.jsx)(b.b,{to:"/wishlist",children:"Your List"}),Object(p.jsx)(b.b,{to:"/events",children:"Your Events"}),Object(p.jsxs)(b.b,{to:"/logout",children:["Log Out ",t.isLoggedIn.name]})]}),!t.isLoggedIn&&Object(p.jsxs)("span",{children:[Object(p.jsx)(b.b,{to:"/login",children:"Log In"}),Object(p.jsx)(b.b,{to:"/signup",children:"Sign Up"})]})]})})},v=n(16),x=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).handleChange=function(t){var e=t.target,n=e.name,r=e.value;a.setState(Object(v.a)({},n,r))},a.handleSubmit=function(t){t.preventDefault();var e=a.state,n={name:e.name,password:e.password};j.a.post("http://localhost:3000/login",{user:n},{withCredentials:!0}).then((function(t){t.data.logged_in?(a.props.handleLogin(t.data),a.redirect()):a.setState({errors:t.data.errors})})).catch((function(t){return console.log("api errors:",t)}))},a.redirect=function(){a.props.history.push("/")},a.handleErrors=function(){return Object(p.jsx)("div",{children:Object(p.jsx)("ul",{children:a.state.errors.map((function(t){return Object(p.jsx)("li",{children:t},t)}))})})},a.state={name:"",password:"",errors:""},a}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.name,n=(t.email,t.password);return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Log In"}),Object(p.jsx)("p",{children:this.state.errors}),Object(p.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(p.jsx)("input",{placeholder:"name",type:"text",name:"name",value:e,onChange:this.handleChange}),Object(p.jsx)("input",{placeholder:"password",type:"password",name:"password",value:n,onChange:this.handleChange}),Object(p.jsx)("button",{placeholder:"submit",type:"submit",children:"Log In"}),Object(p.jsxs)("div",{children:["or ",Object(p.jsx)(b.b,{to:"/signup",children:"sign up"})]})]})]})}}]),n}(a.Component),g=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).handleChange=function(t){var e=t.target,n=e.name,r=e.value;a.setState(Object(v.a)({},n,r))},a.handleSubmit=function(t){t.preventDefault();var e=a.state,n={name:e.name,email:e.email,password:e.password,password_confirmation:e.password_confirmation};j.a.post("http://localhost:3000/users",{user:n},{withCredentials:!0}).then((function(t){"created"===t.data.status?(a.props.handleLogin(t.data),a.redirect()):(console.log(t.data.errors),a.setState({errors:t.data.errors}))})).catch((function(t){return console.log("api errors:",t)}))},a.redirect=function(){a.props.history.push("/")},a.handleErrors=function(){return Object(p.jsx)("div",{children:Object(p.jsx)("ul",{children:a.state.errors.map((function(t){return Object(p.jsx)("li",{children:t},t)}))})})},a.state={name:"",email:"",password:"",password_confirmation:"",errors:[]},a}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.name,n=t.email,a=t.password,r=t.password_confirmation;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Sign Up"}),this.handleErrors(),Object(p.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(p.jsx)("input",{placeholder:"name",type:"text",name:"name",value:e,onChange:this.handleChange}),Object(p.jsx)("input",{placeholder:"email",type:"email",name:"email",value:n,onChange:this.handleChange}),Object(p.jsx)("input",{placeholder:"password",type:"password",name:"password",value:a,onChange:this.handleChange}),Object(p.jsx)("input",{placeholder:"password confirmation",type:"password",name:"password_confirmation",value:r,onChange:this.handleChange}),Object(p.jsx)("button",{placeholder:"submit",type:"submit",children:"Sign Up"})]})]})}}]),n}(a.Component);function m(t,e,n){console.log("AddToWishList()"),console.log(t);var a={name:t.name,longitude:t.geometry.location.lng,latitude:t.geometry.location.lat,address:t.formatted_address,price_level:t.price_level,rating:t.rating,website:t.website,user_id:e};console.log(a),j.a.post("http://localhost:3000/restaurants.json",a).then((function(t){console.log(t.data.id),n(t.data.id)}))}var _=function(t){return console.log(t.user),Object(p.jsx)("button",{onClick:function(){return m(t.restaurant,t.user.id,(function(){}))},children:"Add to your Wishlist"})};var C=function(t){return Object(p.jsx)("button",{children:Object(p.jsx)("a",{href:"/restaurant/"+t.restaurant.id+"/create-event",children:"Create Event"})})},S=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;Object(o.a)(this,n),(a=e.call(this,t)).state={restaurant:{}},console.log(t.match.params.id);var r,s=(r=t.match.params.id,"http://localhost:3000/restaurants/".concat(r));console.log(s);return console.log("fetchRestaurant()"),j.a.get(s).then((function(t){a.setState({restaurant:t.data.restaurants})})),a}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:this.state.restaurant.name}),Object(p.jsxs)("p",{children:["Address: ",this.state.restaurant.address]}),Object(p.jsxs)("p",{children:["Website: ",Object(p.jsx)("a",{href:this.state.restaurant.website,children:this.state.restaurant.website})]}),Object(p.jsxs)("p",{children:["Contact: ",this.state.restaurant.contact]}),Object(p.jsxs)("p",{children:["Rating: ",this.state.restaurant.rating,"/5"]}),Object(p.jsxs)("p",{children:["Price level: ",this.state.restaurant.price_level,"/5"]}),Object(p.jsx)("p",{children:"Restaurant's photo coming soon"}),Object(p.jsx)(C,{restaurant:this.state.restaurant})]})}}]),n}(a.Component),y=S,w=n(9),L=function(t){return Object(p.jsx)("div",{children:t.chats.map((function(t){return Object(p.jsxs)("p",{children:[t.user_id,": ",t.content]},t.id)}))})},k=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;Object(o.a)(this,n),(a=e.call(this,t)).state={id:a.props.event_id,chats:[]};return function t(){j.a.get("http://localhost:3000/chats.json").then((function(e){var n=e.data.filter((function(t){return t.event_id===a.state.id}));a.setState({chats:n}),setTimeout(t,4e3)}))}(),a}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Testing"}),Object(p.jsx)(L,{chats:this.state.chats})]})}}]),n}(a.Component),I=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t))._handleSubmit=function(t){t.preventDefault(),a.setState({content:""}),j.a.post("http://localhost:3000/chats",{user_id:a.props.user.id,event_id:a.props.event_id,content:a.state.content}).then((function(t){console.log(t)}),(function(t){console.log("CreateChat error",t)}))},a.state={content:""},a._handleChange=a._handleChange.bind(Object(w.a)(a)),a._handleSubmit=a._handleSubmit.bind(Object(w.a)(a)),a}return Object(u.a)(n,[{key:"_handleChange",value:function(t){this.setState({content:t.target.value})}},{key:"render",value:function(){return Object(p.jsx)("div",{children:Object(p.jsxs)("form",{onSubmit:this._handleSubmit,children:[Object(p.jsx)("textarea",{name:"",id:"",cols:"40",rows:"5",onChange:this._handleChange,value:this.state.content}),Object(p.jsx)("input",{type:"submit",value:"Post"})]})})}}]),n}(a.Component),D=function(t){return"http://localhost:3000/events/".concat(t,".json")},E=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;Object(o.a)(this,n),(a=e.call(this,t))._handleToggle=function(t){t.preventDefault(),a.setState({edit:!a.state.edit})},a._handleEdit=function(t){t.preventDefault();var e={title:t.target.title.value,date:t.target.date.value,introduction:t.target.introduction.value},n=D(a.state.id);j.a.put(n,e).then((function(t){console.log(t)})),a.setState({edit:!1,title:e.title,date:e.date,introduction:e.introduction})},a.state={edit:!1,id:a.props.event_id,title:"",introduction:"",date:"",creator:{},restaurant:{},attendants:[]},a._handleToggle=a._handleToggle.bind(Object(w.a)(a)),a._handleEdit=a._handleEdit.bind(Object(w.a)(a)),a._handleDelete=a._handleDelete.bind(Object(w.a)(a)),a.renderRecord=a.renderRecord.bind(Object(w.a)(a)),a.renderForm=a.renderForm.bind(Object(w.a)(a));var r=D(a.props.event_id);return j.a.get(r).then((function(t){var e=t.data.event;a.setState({title:e.title,introduction:e.introduction,date:e.date,creator:e.user,restaurant:e.restaurant,attendants:e.attendants})})),a}return Object(u.a)(n,[{key:"_handleDelete",value:function(){var t=D(this.state.id);j.a.delete(t,{params:{id:this.state.id}}).then((function(t){console.log(t)}))}},{key:"renderRecord",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsxs)("h2",{children:["Event: ",this.state.title]}),Object(p.jsxs)("h3",{children:["Date: ",this.state.date," || Creator: ",this.state.creator.name]}),Object(p.jsxs)("h3",{children:["Venue: ",this.state.restaurant.name]}),Object(p.jsxs)("h4",{children:["Attendants:",this.state.attendants.map((function(t){return t.user.name})).join(", ")]}),Object(p.jsxs)("p",{children:["Summary: ",this.state.introduction]}),Object(p.jsx)("button",{onClick:this._handleToggle,children:" Edit this event"}),Object(p.jsx)("button",{onClick:this._handleDelete,children:" Delete this event"}),Object(p.jsx)(k,{event_id:this.state.id}),Object(p.jsx)(I,Object(c.a)(Object(c.a)({},this.props),{},{event_id:this.state.id}))]})}},{key:"findAttendants",value:function(t,e){return e.filter((function(e){var n=new RegExp(t,"gi");return e.name.match(n)}))}},{key:"renderForm",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Edit Event"}),Object(p.jsxs)("h3",{children:["Venue:",this.state.restaurant.name]}),Object(p.jsxs)("form",{onSubmit:this._handleEdit,children:[Object(p.jsx)("label",{children:"Title"}),Object(p.jsx)("input",{name:"title",defaultValue:this.state.title,required:!0}),Object(p.jsx)("label",{children:"Date"}),Object(p.jsx)("input",{placeholder:"2020-12-31",name:"date",defaultValue:this.state.date,required:!0}),Object(p.jsx)("label",{children:"Summary"}),Object(p.jsx)("textarea",{name:"introduction",defaultValue:this.state.introduction}),Object(p.jsx)("button",{children:"Update"})]})]})}},{key:"render",value:function(){return this.state.edit?this.renderForm():this.renderRecord()}}]),n}(a.Component),R=function(t){var e=Object(O.f)().id;return Object(p.jsx)(E,Object(c.a)(Object(c.a)({},t),{},{event_id:parseInt(e)}))},A=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t))._handleChange=function(t){var e=t.target,n=e.name,r=e.value;a.setState(Object(v.a)({},n,r))},a._handleSubmit=function(t){t.preventDefault();var e=a.state,n={title:e.title,date:e.date,introduction:e.introduction,user:e.user,restaurant_id:e.restaurant_id};console.log(n),j.a.post("http://localhost:3000/events",n).then((function(t){console.log(t.data)}))},a._findAttendants=function(t){if(t.preventDefault(),""!==t.target.value){var e=t.target.value;j.a.get("http://localhost:3000/users").then((function(t){var n=t.data.users.filter((function(t){var n=new RegExp(e,"gi");return t.name.match(n)}));a.setState({attendants_search:n})}))}else a.setState({attendants_search:[]})},a._handleCheck=function(t){t.preventDefault(),console.log(t)},a.state={title:"",date:"",introduction:"",user:"",restaurant_id:a.props.restaurant_id,attendants:[],attendants_search:[],attendants_checked:[]},a._handleChange=a._handleChange.bind(Object(w.a)(a)),a._handleSubmit=a._handleSubmit.bind(Object(w.a)(a)),a._findAttendants=a._findAttendants.bind(Object(w.a)(a)),a}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Create Event"}),Object(p.jsx)("h3",{children:"Venue:"}),Object(p.jsxs)("form",{onSubmit:this._handleSubmit,children:[Object(p.jsx)("label",{children:"Title"}),Object(p.jsx)("input",{name:"title",onChange:this._handleChange}),Object(p.jsx)("label",{children:"Date"}),Object(p.jsx)("input",{placeholder:"2020-12-31",name:"date",onChange:this._handleChange}),Object(p.jsx)("label",{children:"Summary"}),Object(p.jsx)("textarea",{name:"introduction",onChange:this._handleChange}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Attendants"}),Object(p.jsx)("input",{name:"attendants",onChange:this._findAttendants}),Object(p.jsx)("ul",{children:this.state.attendants_search.map((function(e){return Object(p.jsxs)("label",{children:[Object(p.jsx)("input",{type:"checkbox",id:e.id,onChange:t._handleCheck}),e.name]})}))})]}),Object(p.jsx)("button",{children:"Create Event"})]})]})}}]),n}(a.Component),T=function(){var t=Object(O.f)().id;return Object(p.jsx)(A,{restaurant_id:parseInt(t)})};var q=function(t){return Object(p.jsx)("button",{onClick:function(){m(t.restaurant,t.user.id,(function(e){console.log(e),t.history.push("/restaurant/".concat(e,"/create-event"))}))},children:"Add to list and create Event"})},F=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={restaurant:t.restaurant},a}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{children:[this.props.restaurant.name&&Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:this.props.restaurant.name}),Object(p.jsx)(_,Object(c.a)(Object(c.a)({},this.props),{},{restaurant:this.props.restaurant})),Object(p.jsx)(q,Object(c.a)(Object(c.a)({},this.props),{},{restaurant:this.props.restaurant}))]}),Object(p.jsx)("p",{children:this.props.restaurant.formatted_address}),this.props.restaurant.rating&&Object(p.jsxs)("p",{children:["Rating: ",this.props.restaurant.rating]}),this.props.restaurant.user_ratings_total&&Object(p.jsxs)("p",{children:["Total user rating: ",this.props.restaurant.user_ratings_total]})]})}}]),n}(a.Component),V=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).state={query:""},t._handleInput=t._handleInput.bind(Object(w.a)(t)),t._handleSubmit=t._handleSubmit.bind(Object(w.a)(t)),t}return Object(u.a)(n,[{key:"_handleInput",value:function(t){this.setState({query:t.target.value})}},{key:"_handleSubmit",value:function(t){t.preventDefault(),this.props.onSubmit(this.state.query)}},{key:"render",value:function(){return Object(p.jsxs)("form",{onSubmit:this._handleSubmit,children:[Object(p.jsx)("input",{onInput:this._handleInput}),Object(p.jsxs)("button",{children:["Hmm...",this.state.query,"?"]})]})}}]),n}(a.Component),P=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={restaurant:{}},a.fetchRestaurant=a.fetchRestaurant.bind(Object(w.a)(a)),a}return Object(u.a)(n,[{key:"fetchRestaurant",value:function(t){var e=this;j.a.get(function(t){return["https://maps.googleapis.com/maps/api/place/findplacefromtext/json?input=",t,"&inputtype=textquery&fields=photos,formatted_address,name,rating,opening_hours,photos,price_level,user_ratings_total,types,geometry&key=","AIzaSyDpF67gcwqJT5Lku1Aj-78unvq0OpKUNpA"].join("")}(t)).then((function(t){e.setState({restaurant:t.data.candidates[0]})}))}},{key:"render",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)(V,Object(c.a)(Object(c.a)({},this.props),{},{onSubmit:this.fetchRestaurant})),Object(p.jsx)(F,Object(c.a)(Object(c.a)({},this.props),{},{restaurant:this.state.restaurant}))]})}}]),n}(a.Component);var U=function(t){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:" I feel like"}),Object(p.jsx)(P,Object(c.a)({},t))]})},W=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={restaurantList:[]},j.a.get("http://localhost:3000/restaurants.json").then((function(e){var n=e.data.filter((function(e){return e.user.id===t.user.id}));console.log(n),a.setState({restaurantList:n}),console.log(a.state.restaurantList)})),a}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{children:this.state.restaurantList.map((function(t){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:t.name}),Object(p.jsx)(C,{restaurant:t}),Object(p.jsxs)("p",{children:["Address: ",t.address]}),Object(p.jsxs)("p",{children:["Website: ",Object(p.jsx)("a",{href:t.website,children:t.website})]}),Object(p.jsxs)("p",{children:["Contact: ",t.contact]}),Object(p.jsxs)("p",{children:["Rating: ",t.rating,"/5"]}),Object(p.jsxs)("p",{children:["Price level: ",t.price_level,"/5"]}),Object(p.jsx)("p",{children:"Restaurant's photo coming soon"})]})}))})}}]),n}(a.Component),Y=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){return Object(o.a)(this,n),e.call(this,t)}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Your wishlist"}),Object(p.jsx)(W,Object(c.a)({},this.props))]})}}]),n}(a.Component),J=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={eventList:[]},j.a.get("http://localhost:3000/events.json").then((function(e){console.log(e);var n=e.data.filter((function(e){return e.user.id===t.user.id}));console.log(n),a.setState({eventList:n}),console.log(a.state.eventList)})),a}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Your Events"}),this.state.eventList.map((function(t){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:t.title}),Object(p.jsxs)("p",{children:["Introduction: ",t.introduction]}),Object(p.jsxs)("p",{children:["Date: ",t.date]})]})}))]})}}]),n}(a.Component),B=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).loginStatus=function(){j.a.get("http://localhost:3000/logged_in",{withCredentials:!0}).then((function(t){t.data.logged_in?a.handleLogin(t):a.handleLogout()})).catch((function(t){return console.log("api errors:",t)}))},a.handleLogin=function(t){a.setState({isLoggedIn:!0,user:t.data.user})},a.handleLogout=function(){a.setState({isLoggedIn:!1,user:{}})},a.state={isLoggedIn:!1,user:{}},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.loginStatus()}},{key:"render",value:function(){var t=this;return Object(p.jsx)("div",{children:Object(p.jsxs)(b.a,{children:[Object(p.jsx)(f,Object(c.a)(Object(c.a)({},this.props),{},{isLoggedIn:this.state.isLoggedIn})),Object(p.jsxs)(O.c,{children:[Object(p.jsx)(O.a,{exact:!0,path:"/",component:function(e){return Object(p.jsx)(U,Object(c.a)(Object(c.a)(Object(c.a)({},e),t.state),{},{isLoggedIn:t.state.isLoggedIn}))}}),Object(p.jsx)(O.a,{exact:!0,path:"/login",component:function(e){return Object(p.jsx)(x,Object(c.a)(Object(c.a)({},e),{},{handleLogin:t.handleLogin}))}}),Object(p.jsx)(O.a,{exact:!0,path:"/signup",component:function(e){return Object(p.jsx)(g,Object(c.a)(Object(c.a)({},e),{},{handleLogin:t.handleLogin}))}}),Object(p.jsx)(O.a,{exact:!0,path:"/event/:id",component:function(){return Object(p.jsx)(R,Object(c.a)({},t.state))}}),Object(p.jsx)(O.a,{exact:!0,path:"/restaurant/:id",component:y}),Object(p.jsx)(O.a,{exact:!0,path:"/wishlist",component:function(){return Object(p.jsx)(Y,Object(c.a)({},t.state))}}),Object(p.jsx)(O.a,{exact:!0,path:"/events",component:function(){return Object(p.jsx)(J,Object(c.a)({},t.state))}}),Object(p.jsx)(O.a,{exact:!0,path:"/restaurant/:id/create-event",component:function(){return Object(p.jsx)(T,Object(c.a)({},t.state))}})]})]})})}}]),n}(a.Component),H=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,66)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,s=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),s(t),i(t)}))};i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(B,{})}),document.getElementById("root")),H()}},[[65,1,2]]]);
//# sourceMappingURL=main.aa0178e6.chunk.js.map